# はじめに

malloc~~わからん~~難しかったです。そもそもC言語のことをよくわかっていなかったので発狂しそうです。(コード書く前)よくわからないなりにmallocについて考えてみました。

# mallocあれこれ
## malocとは？
mallocとはメモリを確保/解放するライブラリ関数のこと。<br>
malloc() -> メモリ確保<br>
free() -> メモリ解放<br>
セットで行う！らしい。<br>

あとは、mallocは大きなメモリしか管理できないOSと小さいサイズのメモリを使いたいapplicationの橋渡し的存在らしい。中間管理職は大変そうですね。<br>

## 今回の宿題の概要
**mallocを実装しよう！**...全然わからん。C言語もわからん(2回目)<br>
とりあえず宿題の順番は
1. best-fit mallocに改造してください<br>
2. freelist binを実装してください！<br>
3. 空き領域のマージを実装してください！<br>
4. (optional) 自由に改造して性能を向上させてください！！<br>
だったのでとりあえずやってみます


# コードの概要
0. 環境構築<br>
Linux環境がなかったのでGoogle Cloud Shellを使いました。意外とすぐターミナルまで辿り着けた...<br>

1. best-fit mallocの実装<br>
-> 空きサイズの中から確保したいサイズに一番近いものをpickupする。<br>
best_cur / best_prevの変数を作成して、必要サイズより大きいかつ一番近い大きさの空きサイズを見つけました。但し時間がめちゃくちゃかかった。metadataの更新部分でめちゃくちゃ詰まったけどなんとかできました！みんなありがとう！
<img src=https://user-images.githubusercontent.com/63898148/175283024-ffb106c7-1277-4810-8bdd-cd20173e94b9.png>

2. freelist binの実装<br>
1で十分ハッピーだとは思うのですが、時間がめちゃくちゃかかりました。これを解決するのがfreelist bin(らしい)です。<br>
とりあえずfreelist binを振り分けて、なんか埋めることはできましたがkilledされたので泣きました。途中経過を放り投げておきます。


# おわり
C言語もmallocも難しいですね、吐きそうです。みんなつよつよで泣きそうです。<br>でもpython以外にも強制的に触れることができたのはいい機会になりました。Cの練習としてhello.cで色々遊んだのは楽しかったので、CやC++ともゆっくり触れ合っていきたいですね。<br>


<img src = https://user-images.githubusercontent.com/63898148/174863290-ad2513ee-c91a-43e0-a5a6-248439e278e4.png>


